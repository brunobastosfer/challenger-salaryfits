generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum MedicineType {
  fitoterapico
  Alopatico
  homeopatico
  similar
  generico
  referencia
  manipulado
}

model Medicine {
  id        String       @id @unique   @default(uuid())
  name      String
  description String
  price Float
  type      MedicineType @default(generico)
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt

  stock_id       String @unique
  stock Stock @relation(fields: [stock_id], references: [id], onUpdate: Cascade)
}

model Stock {
  id String @id @unique @default(uuid())
  medicines Medicine?

  entrance Entrance?
  exit Exit?
}

model Entrance {
  id String @id @unique @default(uuid())
  createdAt DateTime @default(now())

  stock_id String @unique
  stock Stock @relation(fields: [stock_id], references: [id])
}

model Exit {
  id String @id @unique @default(uuid())
  createdAt DateTime @default(now())

  stock_id String @unique
  stock Stock  @relation(fields: [stock_id], references: [id])
}